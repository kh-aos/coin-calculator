var currentPriceOfCoinSelected;function returnWorth(){var e=document.querySelector(".selectCoin").value;if(""!=e){var t=document.getElementById("inputInvestAmount").value,n=document.getElementById("inputDesiredAmount").value,o=0,c=0,i="https://api.coingecko.com/api/v3/simple/price?ids="+e+"&vs_currencies=usd",r=new XMLHttpRequest;r.open("GET",i,!0),r.onload=function(){var i=JSON.parse(this.response);o=i[e].usd;var r=new Number(t/o*n);document.getElementById("displayNetWorthAmount").value=r,(c=r-t)>0&&(document.getElementById("pnlAmount").style.color="green",document.getElementById("pnlAmount").innerHTML="Profit($): "+c),c<0&&(document.getElementById("pnlAmount").style.color="red",document.getElementById("pnlAmount").innerHTML="Loss($): "+c),0==c&&(document.getElementById("pnlAmount").style.color="red",document.getElementById("pnlAmount").innerHTML="No Profit/Lost($): "+c)},r.send()}}async function fetchData(){const e=await fetch("https://api.coingecko.com/api/v3/coins/"),t=await e.json();if(1==$(".selectCoin > option").length)for(const[e,n]of Object.entries(t))$(".selectCoin").append($("<option value="+n.id+">"+n.name+" - ("+n.symbol+")</option>"));if(1==$(".selectedCoin > option").length)for(const[e,n]of Object.entries(t))$(".selectedCoin").append($("<option value="+n.id+">"+n.name+" - ("+n.symbol+")</option>"))}async function fetchNews(){const e=await fetch("https://api.coingecko.com/api/v3/news/"),t=await e.json();var n=0,o="<table style='td { padding: 10px 10px 10px 10px;border: 1px solid #444;border-bottom-width: 0px;}'><tr><th class='text-center'>Latest News in the world of crypto</th></tr>";for(i in t.data)n%2==0?(o+="<tr><td >",o+='<div class="card" >',o+='<img class="img-fluid card-img-top" src="'+(""==t.data[i].thumb_2x?"images/noimage.png":t.data[i].thumb_2x)+'" alt=""/>',o+=' <div class="card-body" >',o+=' <h5 class="card-title" style="font-size: 12px"><b>'+t.data[i].title+"</b></h5>",o+=' <p class="card-text" style="font-size: 12px">'+t.data[i].description.substring(0,200)+"...</p>",o+='<p style="font-size: 12px">Article on '+t.data[i].news_site+" ⤴</p>",o+='<a href="'+t.data[i].url+'" style="font-size: 12px" target="_blank" class="btn btn-primary">View >></a>',o+=" </div>",o+=" </div>"):o+="</td></tr>",n++;o+=" </table>",document.getElementById("slideContainer").innerHTML=o}async function retrieveCoinDetailsInvest(){var e=document.querySelector(".selectCoin").value;if("null"!=e){var t="https://api.coingecko.com/api/v3/coins/"+e;const n=await fetch(t),o=await n.json();document.getElementById("currencyImage").src=o.image.large,document.querySelector(".currentPrice").innerHTML="<u>Current price of 1 "+o.name+" ≈ "+o.market_data.current_price.usd+" $</u>",currentPriceOfCoinSelected=o.market_data.current_price.usd,calculateAmountCoin()}}function calculateAmountCoin(){var e;e=document.querySelector(".inputAmountToInvest").value,console.log(e),console.log(currentPriceOfCoinSelected),document.getElementById("coinAmount").innerHTML="Coin(s): "+new Number(e/currentPriceOfCoinSelected).toFixed(5)+"</font>"}async function retrieveCoinDetailsInvested(){var e=document.querySelector(".selectedCoin").value;if("null"!=e){var t="https://api.coingecko.com/api/v3/coins/"+e;const n=await fetch(t),o=await n.json();document.getElementById("currencyImage2").src=o.image.large,document.querySelector(".currentPrice2").innerHTML="Current price of 1 "+o.name+" ≈ "+o.market_data.current_price.usd+" $"}}async function returnWorth2(){try{document.getElementById("demo").innerHTML="";var e=document.querySelector(".selectedCoin").value,t=new Date(document.getElementById("inputPastDate").value),n=t.getDate()+"-"+new Number(t.getMonth()+1)+"-"+t.getFullYear(),o=0;if("null"!=e){var c=document.getElementById("inputInvestedAmount").value;console.log(e);var i="https://api.coingecko.com/api/v3/coins/"+e+"/history?date="+n+"%22,%22market_data.current_price.usd";const t=await fetch(i);var r=(await t.json()).market_data.current_price.usd;i="https://api.coingecko.com/api/v3/coins/"+e;const d=await fetch(i);var a=(await d.json()).market_data.current_price.usd,l=new Number(a/r*c);document.getElementById("displayNetWortInvestedhAmount").value=l,(o=l-c)>0&&(document.getElementById("pnlAmounted").style.color="green",document.getElementById("pnlAmounted").innerHTML="Profit($): "+o),o<0&&(document.getElementById("pnlAmounted").style.color="red",document.getElementById("pnlAmounted").innerHTML="Loss($): "+o),0==o&&(document.getElementById("pnlAmounted").style.color="red",document.getElementById("pnlAmounted").innerHTML="No Profit/Lost($): "+o)}}catch(e){document.getElementById("demo").innerHTML="Please try a later date."}}window.onload=function(){fetchData(),fetchNews(),inputPastDate.max=(new Date).toISOString().split("T")[0]};